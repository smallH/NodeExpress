webpackJsonp([13],{"6rvO":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"proxy",data:function(){return{}},methods:{},mounted:function(){this.$http.get("http://127.0.0.1/api/mockGetJson").then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})}},r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"proxy"}},[n("div",{staticClass:"bground"},[n("div",{staticClass:"title"},[t._v("服务代理")]),t._v(" "),n("div",{staticClass:"line"}),t._v(" "),n("div",{staticClass:"content"},[n("div",[t._v("服务代理是指通过访问本地域名即可有权限访问非同域下的服务器。服务代理常用于开发环境中，正常的开发环境下一般基于前后端分离，前端和后端往往不在同一个服务器下进行开发，此时使用服务代理可以将前端请求模拟成同一服务器下实现，在正式部署时就无需再修改请求接口的域名地址。")]),t._v(" "),n("div",{staticClass:"code-title"},[t._v("在启动json-server的基础上，config/index.js文件中服务代理配置项proxyTable配置如下：")]),t._v(" "),n("div",{staticClass:"md"},[n("pre",[n("code",[t._v("dev: {\n\t...\n\tproxyTable: {\n\t\t'/api': {\n\t\t\ttarget: 'http://127.17.5.117:3000',\n\t\t\tsecure: false,\n\t\t\tchangeOrigin: true,\n\t\t\tpathRewrite: {\n\t\t\t\t'^/api': ''\n\t\t\t},\n\t\t\tonProxyReq(proxyReq, req, res) {\n\t\t\t\tproxyReq.setHeader('Referer', 'http://127.17.5.117:3000');\n\t\t\t\tproxyReq.setHeader('Origin', 'http://127.17.5.117:3000');\n\t\t\t},\n\t\t\tonProxyRes(proxyRes, req, res) {\n\t\t\t\tproxyRes.headers['Access-Control-Request-Origin'] = '*';\n\t\t\t\tproxyRes.headers['Access-Control-Request-Headers'] = '*';\n\t\t\t}\n\t\t}\n\t},\n\t...\n},")])])]),t._v(" "),n("div",{staticClass:"code-title"},[t._v("有了服务代理，访问本地域名http://127.0.0.1/api/即可访问到非同域的http://127.17.5.117:3000服务：")]),t._v(" "),n("div",{staticClass:"md"},[n("pre",[n("code",[t._v('let path = "http://127.0.0.1/api/mockGetJson";\nthis.$http.get(path).then(function(resp) {\n\tconsole.log(resp.data);\n}).catch(error => {\n\tconsole.log(error);\n});')])])]),t._v(" "),n("div",{staticClass:"code-title"},[t._v("其中this.$http定义为：")]),t._v(" "),n("div",{staticClass:"md"},[n("pre",[n("code",[t._v("Vue.prototype.$http = axios;")])])])])])])}]};var o=n("VU/8")(s,r,!1,function(t){n("gaSd")},"data-v-453a9fd4",null);e.default=o.exports},gaSd:function(t,e){}});
//# sourceMappingURL=13.84a65b54be6e83d4a4b8.js.map